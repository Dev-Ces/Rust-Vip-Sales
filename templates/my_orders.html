{% extends 'base.html' %}

{% block title %}Rust VIP - Siparişlerim{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12 text-center">
        <h1 class="page-title">SİPARİŞLERİM</h1>
        <p class="lead">Tüm siparişlerinizi ve durumlarını buradan takip edebilirsiniz.</p>
    </div>
</div>

<div class="row mt-5">
    <div class="col-md-12">
        {% if orders %}
            <div class="orders-table-wrapper">
                <table class="table orders-table">
                    <thead>
                        <tr>
                            <th>Sipariş No</th>
                            <th>Tarih</th>
                            <th>Steam ID</th>
                            <th>Tutar</th>
                            <th>Ödeme Yöntemi</th>
                            <th>Durum</th>
                            <th>İşlemler</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for order in orders %}
                            <tr>
                                <td>{{ order.order_number }}</td>
                                <td>{{ order.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                                <td>{{ order.steam_id }}</td>
                                <td>{{ order.amount }} USD</td>
                                <td>{{ order.payment_method|capitalize }}</td>
                                <td>
                                    <span class="status-badge status-{{ order.status }}">
                                        {% if order.status == 'pending' %}
                                            İşleniyor
                                        {% elif order.status == 'completed' %}
                                            Tamamlandı
                                        {% elif order.status == 'cancelled' %}
                                            İptal Edildi
                                        {% endif %}
                                    </span>
                                </td>
                                <td>
                                    <a href="{{ url_for('order_confirmation', order_id=order.id) }}" class="btn btn-sm btn-primary">
                                        <i class="fas fa-eye"></i> Görüntüle
                                    </a>
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="no-orders">
                <i class="fas fa-shopping-cart"></i>
                <h3>Henüz hiç siparişiniz bulunmuyor.</h3>
                <p>VIP paketlerimizi incelemek ve sipariş vermek için aşağıdaki butona tıklayabilirsiniz.</p>
                <a href="{{ url_for('vip') }}" class="btn btn-primary mt-3">VIP Paketleri İncele</a>
            </div>
        {% endif %}
    </div>
</div>

{% if orders %}
<div class="row mt-5">
    <div class="col-md-12">
        <div class="info-card">
            <h3><i class="fas fa-info-circle"></i> Sipariş Durumları Hakkında</h3>
            <ul>
                <li><span class="status-badge status-pending">İşleniyor</span> - Ödemeniz bekleniyor veya kontrol ediliyor.</li>
                <li><span class="status-badge status-completed">Tamamlandı</span> - Ödemeniz onaylandı ve VIP paketiniz aktifleştirildi.</li>
                <li><span class="status-badge status-cancelled">İptal Edildi</span> - Siparişiniz iptal edildi veya ödeme alınamadı.</li>
            </ul>
            <p>Siparişinizle ilgili herhangi bir sorun yaşarsanız, lütfen Discord sunucumuzdan destek alın.</p>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_css %}
<style>
    .page-title {
        color: #ff6b00;
        font-weight: bold;
        margin-bottom: 20px;
    }
    
    .orders-table-wrapper {
        background-color: #1e2124;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid #333;
        overflow-x: auto;
    }
    
    .orders-table {
        color: #fff;
    }
    
    .orders-table thead th {
        background-color: #121416;
        color: #ff6b00;
        border-color: #333;
    }
    
    .orders-table tbody tr {
        border-color: #333;
    }
    
    .orders-table tbody tr:hover {
        background-color: #121416;
    }
    
    .status-badge {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
    }
    
    .status-pending {
        background-color: rgba(255, 193, 7, 0.2);
        color: #ffc107;
        border: 1px solid #ffc107;
    }
    
    .status-completed {
        background-color: rgba(40, 167, 69, 0.2);
        color: #28a745;
        border: 1px solid #28a745;
    }
    
    .status-cancelled {
        background-color: rgba(220, 53, 69, 0.2);
        color: #dc3545;
        border: 1px solid #dc3545;
    }
    
    .no-orders {
        background-color: #1e2124;
        border-radius: 10px;
        padding: 50px 20px;
        text-align: center;
        border: 1px solid #333;
    }
    
    .no-orders i {
        font-size: 5rem;
        color: #ff6b00;
        margin-bottom: 20px;
    }
    
    .no-orders h3 {
        margin-bottom: 15px;
    }
    
    .info-card {
        background-color: #1e2124;
        border-radius: 10px;
        padding: 20px;
        border: 1px solid #333;
    }
    
    .info-card h3 {
        color: #ff6b00;
        margin-bottom: 15px;
    }
    
    .info-card ul {
        padding-left: 20px;
    }
    
    .info-card li {
        margin-bottom: 10px;
    }
</style>
{% endblock %}